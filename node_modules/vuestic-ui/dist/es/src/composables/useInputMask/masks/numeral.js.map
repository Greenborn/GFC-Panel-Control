{"version":3,"file":"numeral.js","sources":["../../../../../../src/composables/useInputMask/masks/numeral.ts"],"sourcesContent":["import { Mask, MaskToken } from '../mask'\nimport { createRegexMask, RegexToken } from './regex'\n\nconst DELIMITER = ' '\nconst DECIMAL = '.'\n\ntype NumeralToken = RegexToken & { isDecimal?: boolean}\n\nexport const createNumeralMask = (): Mask<NumeralToken> => {\n  const intMask = createRegexMask(/(\\d{3} )*(\\d{3})/, { reverse: true })\n  const decimalMask = createRegexMask(/(\\d{3} )*(\\d{3})/, { reverse: false })\n\n  return {\n    format: (text: string) => {\n      const hasDecimal = text.includes(DECIMAL)\n\n      if (!hasDecimal) {\n        return intMask.format(text)\n      }\n\n      const [int = '', decimal = '', ...rest] = text.split(DECIMAL)\n\n      const intResult = intMask.format(int)\n      const decimalResult = decimalMask.format(decimal + rest.join(''))\n\n      return {\n        text: intResult.text + DECIMAL + decimalResult.text,\n        tokens: [...intResult.tokens, { type: 'char', static: false, expect: DECIMAL, isDecimal: true }, ...decimalResult.tokens] as NumeralToken[],\n      }\n    },\n    handleCursor (selectionStart, selectionEnd, oldTokens, newTokens, data) {\n      const decimalIndex = newTokens.findIndex((token) => token.isDecimal)\n\n      if (decimalIndex === -1) {\n        return intMask.handleCursor(selectionStart, selectionEnd, oldTokens, newTokens, data)\n      }\n\n      if (selectionStart.position < decimalIndex) {\n        intMask.handleCursor(selectionStart, selectionEnd, oldTokens, newTokens, data)\n      } else {\n        decimalMask.handleCursor(selectionStart, selectionEnd, oldTokens, newTokens, data)\n      }\n    },\n    unformat: (text: string, tokens: MaskToken[]) => {\n      return parseFloat(text.replace(/ /g, '')).toString()\n    },\n  }\n}\n"],"names":[],"mappings":";AAIA,MAAM,UAAU;AAIT,MAAM,oBAAoB,MAA0B;AACzD,QAAM,UAAU,gBAAgB,oBAAoB,EAAE,SAAS,MAAM;AACrE,QAAM,cAAc,gBAAgB,oBAAoB,EAAE,SAAS,OAAO;AAEnE,SAAA;AAAA,IACL,QAAQ,CAAC,SAAiB;AAClB,YAAA,aAAa,KAAK,SAAS,OAAO;AAExC,UAAI,CAAC,YAAY;AACR,eAAA,QAAQ,OAAO,IAAI;AAAA,MAC5B;AAEM,YAAA,CAAC,MAAM,IAAI,UAAU,IAAI,GAAG,IAAI,IAAI,KAAK,MAAM,OAAO;AAEtD,YAAA,YAAY,QAAQ,OAAO,GAAG;AACpC,YAAM,gBAAgB,YAAY,OAAO,UAAU,KAAK,KAAK,EAAE,CAAC;AAEzD,aAAA;AAAA,QACL,MAAM,UAAU,OAAO,UAAU,cAAc;AAAA,QAC/C,QAAQ,CAAC,GAAG,UAAU,QAAQ,EAAE,MAAM,QAAQ,QAAQ,OAAO,QAAQ,SAAS,WAAW,QAAQ,GAAG,cAAc,MAAM;AAAA,MAAA;AAAA,IAE5H;AAAA,IACA,aAAc,gBAAgB,cAAc,WAAW,WAAW,MAAM;AACtE,YAAM,eAAe,UAAU,UAAU,CAAC,UAAU,MAAM,SAAS;AAEnE,UAAI,iBAAiB,IAAI;AACvB,eAAO,QAAQ,aAAa,gBAAgB,cAAc,WAAW,WAAW,IAAI;AAAA,MACtF;AAEI,UAAA,eAAe,WAAW,cAAc;AAC1C,gBAAQ,aAAa,gBAAgB,cAAc,WAAW,WAAW,IAAI;AAAA,MAAA,OACxE;AACL,oBAAY,aAAa,gBAAgB,cAAc,WAAW,WAAW,IAAI;AAAA,MACnF;AAAA,IACF;AAAA,IACA,UAAU,CAAC,MAAc,WAAwB;AAC/C,aAAO,WAAW,KAAK,QAAQ,MAAM,EAAE,CAAC,EAAE;IAC5C;AAAA,EAAA;AAEJ;"}